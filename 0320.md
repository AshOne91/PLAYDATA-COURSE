### **📌 결측치(Missing Values) 처리: 제거 vs. 대체**  

데이터의 결측치 처리는 데이터 타입(수치형 vs. 범주형)과 데이터의 특성에 따라 **제거(drop)** 또는 **대체(impute)** 방식을 선택해야 합니다.  

---

## **1️⃣ 결측치 제거 (Drop)**
💡 **언제 제거해야 할까?**  
- 결측치가 포함된 행(row)이 전체 데이터에서 **차지하는 비율이 적을 때** (예: 5% 미만)  
- 해당 컬럼이 **분석에 큰 영향을 미치지 않을 때**  
- 결측치가 특정 패턴 없이 **무작위로 발생했을 때 (MCAR; Missing Completely at Random)**  
- **대체할 적절한 값이 없거나** 대체 시 **데이터 왜곡 가능성이 높을 때**  

🔹 **예제 (Pandas)**
```python
df.dropna(subset=['컬럼명'], inplace=True)  # 특정 컬럼 기준으로 결측치가 있는 행 삭제
```

---

## **2️⃣ 결측치 대체 (Impute)**
💡 **언제 대체해야 할까?**  
- **결측치가 많은 경우** (행을 제거하면 데이터 손실이 크기 때문)  
- 해당 컬럼이 **중요한 정보**를 포함하고 있을 때  
- 결측치가 특정 패턴을 보일 가능성이 있을 때 (MAR, MNAR)  
- 데이터 손실을 최소화하고 모델 성능을 유지하고 싶을 때  

---

# **📌 데이터 타입별 결측치 처리 방법**
## **✅ 수치형 데이터 (int, float)**
### **1️⃣ 제거 (Drop)**
- 결측 데이터 비율이 낮고, 제거해도 데이터 손실이 크지 않을 때  
```python
df.dropna(subset=['수치형컬럼'], inplace=True)  
```

### **2️⃣ 대체 (Impute)**
#### **✔ 평균(mean) 대체**
📌 **정규 분포를 따르는 데이터에 적합**  
```python
df['수치형컬럼'].fillna(df['수치형컬럼'].mean(), inplace=True)
```

#### **✔ 중앙값(median) 대체**
📌 **이상치(outlier)가 많은 경우 적합 (ex: 소득, 주택 가격)**  
```python
df['수치형컬럼'].fillna(df['수치형컬럼'].median(), inplace=True)
```

#### **✔ 최빈값(mode) 대체**
📌 **값이 특정 값에 집중되어 있을 때 사용 가능**  
```python
df['수치형컬럼'].fillna(df['수치형컬럼'].mode()[0], inplace=True)
```

#### **✔ KNN 또는 머신러닝을 이용한 예측 대체**
📌 **다른 변수들과의 관계를 활용해 결측치를 보완할 때 사용**  
```python
from sklearn.impute import KNNImputer
imputer = KNNImputer(n_neighbors=5)  # 가장 가까운 5개의 값 평균 사용
df[['수치형컬럼']] = imputer.fit_transform(df[['수치형컬럼']])
```

#### **✔ 앞/뒤 값 채우기 (시계열 데이터)**
📌 **시간 순서가 있는 데이터 (ex: 주가, 기온, 센서 데이터)에서 사용**  
```python
df['수치형컬럼'].fillna(method='ffill', inplace=True)  # 이전 값으로 채우기
df['수치형컬럼'].fillna(method='bfill', inplace=True)  # 다음 값으로 채우기
```

---

## **✅ 범주형 데이터 (object, category)**
### **1️⃣ 제거 (Drop)**
- 결측치 비율이 적고, 해당 컬럼이 분석에 크게 영향을 미치지 않을 때  
```python
df.dropna(subset=['범주형컬럼'], inplace=True)
```

### **2️⃣ 대체 (Impute)**
#### **✔ 최빈값(mode) 대체**
📌 **범주형 데이터에서 가장 많이 등장한 값으로 채움**  
```python
df['범주형컬럼'].fillna(df['범주형컬럼'].mode()[0], inplace=True)
```

#### **✔ ‘Unknown’ 또는 ‘Other’ 등 특정 값 대체**
📌 **카테고리가 명확하지 않거나, 분석에서 큰 영향이 없을 때**  
```python
df['범주형컬럼'].fillna('Unknown', inplace=True)
```

#### **✔ 그룹별 최빈값 대체**
📌 **특정 그룹(예: 지역, 성별 등)에 따라 결측치를 보완해야 할 때**  
```python
df['범주형컬럼'] = df.groupby('기준컬럼')['범주형컬럼'].transform(lambda x: x.fillna(x.mode()[0]))
```

#### **✔ 예측 모델 활용 (ML Imputation)**
📌 **다른 변수들과의 관계를 활용해 결측치를 보완할 때 사용**  
```python
from sklearn.impute import SimpleImputer
imputer = SimpleImputer(strategy="most_frequent")
df[['범주형컬럼']] = imputer.fit_transform(df[['범주형컬럼']])
```

---

# **3️⃣ 결론: 수치형 vs 범주형 비교 정리**
| 데이터 타입 | 제거 (Drop) | 대체 (Impute) |
|------------|------------|---------------|
| **수치형** | 결측치 비율이 낮거나 데이터 왜곡 우려가 클 때 | 평균, 중앙값, KNN, 시계열 보간 사용 |
| **범주형** | 결측치 비율이 낮거나 의미 없는 컬럼일 때 | 최빈값, 'Unknown' 대체, 그룹별 보완 |

✅ **수치형은 평균·중앙값·KNN 등 수치적 방법 활용**  
✅ **범주형은 최빈값, 특정 값 ('Unknown') 활용**  
✅ **데이터 특성을 고려해 최적의 방법 선택**  

---

## **📌 결측치 처리 방법 선택 기준**
| 상황 | 제거 (Drop) | 대체 (Impute) |
|------|------------|---------------|
| 결측 데이터 비율 | 적을 때 (5% 미만) | 많을 때 (5% 이상) |
| 데이터 손실 우려 | 적음 | 큼 |
| 해당 컬럼 중요도 | 낮음 | 높음 |
| 데이터 패턴 고려 | 무작위 (MCAR) | 특정 패턴 (MAR, MNAR) |
| 머신러닝 모델 적용 | 필요 없음 | 필요할 수 있음 |

---

## **🎯 최적의 결측치 처리 전략**
1️⃣ **결측치 비율이 낮다면?** → **제거(drop)**  
2️⃣ **중요한 컬럼이라면?** → **평균(mean), 중앙값(median), 최빈값(mode) 대체**  
3️⃣ **시간순 데이터라면?** → **앞/뒤 값 채우기 (ffill, bfill)**  
4️⃣ **고급 기법을 사용하려면?** → **KNN, 머신러닝 기반 예측 대체**  

👉 **데이터의 특성과 분석 목적에 맞게 적절한 방법을 선택하는 것이 중요합니다!** 😊
